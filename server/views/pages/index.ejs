<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
</head>
<body>
    <% include ../partials/header %>
    <div>
      <div id="carousel-example-2" class="carousel slide carousel-fade" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-2" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-2" data-slide-to="1"></li>
          <li data-target="#carousel-example-2" data-slide-to="2"></li>
          <li data-target="#carousel-example-2" data-slide-to="3"></li>
        </ol>
        <div class="carousel-inner" role="listbox">
          <div class="carousel-item active">
            <div class="view" style="height: 360px; width: 100%; overflow: hidden;">
              <video class="w-100" autoplay loop >
                <source class="w-100" src="https://mdbootstrap.com/img/video/animation-intro.mp4" type="video/mp4" />
              </video>
            </div>
            <div class="carousel-caption">
              <div class="animated fadeInDown">
                <h3 class="h3-responsive">Welcome to <%=title%></h3>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="view">
              <div class="d-block w-100" style="height: 360px; overflow: hidden;background-image: url('https://unlocked.newegg.com/sites/default/files/asus-miniitx-z270e-nzxt-build-55.jpeg');background-size:100% auto;"></div>
              <div class="mask rgba-black-light h-50" style=" top:50%; background: linear-gradient(rgba(255,0,0,0), rgba(0,0,0,0.5));"></div>
            </div>
            <div class="carousel-caption">
              <div class="animated fadeInDown">
                <h3 class="h3-responsive">Awesome Build</h3>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="view">
              <div class="d-block w-100" style="height: 360px; overflow: hidden;background-image: url('https://i.ytimg.com/vi/NSNz6VVpWI8/maxresdefault.jpg');background-size:100% auto;"></div>
              <div class="mask rgba-black-light h-50" style=" top:50%; background: linear-gradient(rgba(255,0,0,0), rgba(0,0,0,0.5));"></div>
            </div>
            <div class="carousel-caption">
              <div class="animated fadeInDown">
                <h3 class="h3-responsive">High Quality Specs</h3>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="view">
              <div class="d-block w-100" style="height: 360px; overflow: hidden;background-image: url('https://www.geforce.com/sites/default/files-world/attachments/diy-blueprint-2560x1600.jpg');background-size:100% auto;"></div>
              <div class="mask rgba-black-light h-50"  style=" top:50%; background: linear-gradient(rgba(255,0,0,0), rgba(0,0,0,0.5));"></div>
            </div>
            <div class="carousel-caption">
              <div class="animated fadeInDown">
                <h3 class="h3-responsive">Professional Guide</h3>
              </div>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carousel-example-2" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carousel-example-2" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
    <div class="container pt-5 pb-5 mb-5">
        <% var maxNum = (products.length <4)?products.length:4 %>
        <h3 class="p-2">
          <img src="images/source/fire.png" / style="border-radius: 50%;height: 42px;width: 42px;box-shadow: 0 2px 5px #999999;">
          <span class="pl-3" style="vertical-align: -5px;">Most Popular</span>
        </h3>
        <div class="row">
        <% for(var i=0; i < maxNum; i++){ %>
          <style>
            .productCard{
              transition: box-shadow 0.3s, border 0.3s;
              border: thin solid rgba(0, 0, 0, 0);
            }
            .productCard:hover{
              border: thin solid #f80;
              box-shadow: 0 0 10px #f80;
            }
          </style>
          <a class="col-lg-3 pl-2 pr-2 pb-3" href="<%=hostPath%>/product/<%=products[i].id%>">
            <div class="card productCard">
              <div class="p-3">
                <div class="prodImgContainer" 
                  style=
                    "background-image:url('<%=hostPath%>/images/products/<%=products[i].productImage%>');
                    background-size: contain;
                    background-repeat: no-repeat;
                    background-position: center center;
                    width: 100%;
                    padding-top: 75%;">
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title mb-1 text-dark font-weight-normal" style="height: 2.5rem;overflow: hidden;"><%= products[i].productName %></h6>
                <div class="card-text pb-2">
                  <%= products[i].productType %>
                </div>
                <h4 class="card-title text-warning mb-0">
                  SGD <%= products[i].price %>
                </h4>
                <div class="grey-text mb-2"><small><del class="pr-2">S$<%=Math.round(products[i].price/(1-products[i].discount_percentage),2)%></del> Saving <%=products[i].discount_percentage*100%>%</small></div>
                <div class="card-text">
                  <i class="material-icons pr-2" style="vertical-align: -6px">store</i><%= products[i].userID %>
                </div>
                <div class="card-text pt-2 grey-text" style="position: relative;">
                  <div class="star-ratings" style="width: 95px;vertical-align: -6px;">
                    <div class="star-ratings-top text-warning font-weight-bold popular" style="font-size: 1.2rem;">
                      ★★★★★
                    </div>
                    <div class="star-ratings-bottom text-light font-weight-bold" style="font-size: 1.2rem">
                      ★★★★★
                    </div>
                  </div>
                  <script>
                      var width = "<%if(products[i].dataValues.rating!=null){%><%=products[i].dataValues.rating/5*100%><%}else{%>0<%}%>%"
                      $($(".star-ratings-top.popular")[`<%=i%>`]).css("width",width)
                  </script>
                  <span class="pl-1" style="display: inline-block;"> (<%=products[i].dataValues.reviewCount%>)</span>
                  <span style="display: inline-block;position: absolute; right:0;top:14px;">Sales: <%=products[i].dataValues.saleCount%></span>
                </div>
              </div>
            </div>
          </a>
        <% } %>
      </div>
      <h3 class="p-2">
        <img src="images/source/thumbs-up.png" / style="border-radius: 50%;height: 42px;width: 42px;box-shadow: 0 2px 5px #999999;">
        <span class="pl-3" style="vertical-align: -5px;">Top Ratings</span>
      </h3>
      <div class="row">
        <% for(var i=0; i < maxNum; i++){ %>
          <style>
            .productCard{
              transition: box-shadow 0.3s, border 0.3s;
              border: thin solid rgba(0, 0, 0, 0);
            }
            .productCard:hover{
              border: thin solid #f80;
              box-shadow: 0 0 10px #f80;
            }
          </style>
          <a class="col-lg-3 pl-2 pr-2 pb-3" href="<%=hostPath%>/product/<%=productsRating[i].id%>">
            <div class="card productCard">
              <div class="p-3">
                <div class="prodImgContainer" 
                  style=
                    "background-image:url('<%=hostPath%>/images/products/<%=productsRating[i].productImage%>');
                    background-size: contain;
                    background-repeat: no-repeat;
                    background-position: center center;
                    width: 100%;
                    padding-top: 75%;">
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title mb-1 text-dark font-weight-normal" style="height: 2.5rem;overflow: hidden;"><%= productsRating[i].productName %></h6>
                <div class="card-text pb-2">
                  <%= productsRating[i].productType %>
                </div>
                <h4 class="card-title text-warning mb-0">
                  SGD <%= productsRating[i].price %>
                </h4>
                <div class="grey-text mb-2"><small><del class="pr-2">S$<%=Math.round(productsRating[i].price/(1-productsRating[i].discount_percentage),2)%></del> Saving <%=productsRating[i].discount_percentage*100%>%</small></div>
                <div class="card-text">
                  <i class="material-icons pr-2" style="vertical-align: -6px">store</i><%= productsRating[i].userID %>
                </div>
                <div class="card-text pt-2 grey-text" style="position: relative;">
                  <div class="star-ratings" style="width: 95px;vertical-align: -6px;">
                    <div class="star-ratings-top text-warning font-weight-bold rating" style="font-size: 1.2rem;">
                      ★★★★★
                    </div>
                    <div class="star-ratings-bottom text-light font-weight-bold" style="font-size: 1.2rem">
                      ★★★★★
                    </div>
                  </div>
                  <script>
                      var width = "<%if(productsRating[i].dataValues.rating!=null){%><%=productsRating[i].dataValues.rating/5*100%><%}else{%>0<%}%>%"
                      $($(".star-ratings-top.rating")[`<%=i%>`]).css("width",width)
                  </script>
                  <span class="pl-1" style="display: inline-block;"> (<%=productsRating[i].dataValues.reviewCount%>)</span>
                  <span style="display: inline-block;position: absolute; right:0;top:14px;">Sales: <%=productsRating[i].dataValues.saleCount%></span>
                </div>
              </div>
            </div>
          </a>
        <% } %>
      </div>
      <h3 class="p-2">
        <img src="images/source/sale-tag-icon.png" / style="border-radius: 50%;height: 42px;width: 42px;box-shadow: 0 2px 5px #999999;">
        <span class="pl-3" style="vertical-align: -5px;">Special Sales</span>
      </h3>
      <div class="row">
        <% for(var i=0; i < maxNum; i++){ %>
          <style>
            .productCard{
              transition: box-shadow 0.3s, border 0.3s;
              border: thin solid rgba(0, 0, 0, 0);
            }
            .productCard:hover{
              border: thin solid #f80;
              box-shadow: 0 0 10px #f80;
            }
          </style>
          <a class="col-lg-3 pl-2 pr-2 pb-3" href="<%=hostPath%>/product/<%=productsSale[i].id%>">
            <div class="card productCard">
              <div class="p-3">
                <div class="prodImgContainer" 
                  style=
                    "background-image:url('<%=hostPath%>/images/products/<%=productsSale[i].productImage%>');
                    background-size: contain;
                    background-repeat: no-repeat;
                    background-position: center center;
                    width: 100%;
                    padding-top: 75%;">
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title mb-1 text-dark font-weight-normal" style="height: 2.5rem;overflow: hidden;"><%= productsSale[i].productName %></h6>
                <div class="card-text pb-2">
                  <%= productsSale[i].productType %>
                </div>
                <h4 class="card-title text-warning mb-0">
                  SGD <%= productsSale[i].price %>
                </h4>
                <div class="grey-text mb-2"><small><del class="pr-2">S$<%=Math.round(productsSale[i].price/(1-productsSale[i].discount_percentage),2)%></del> Saving <%=productsSale[i].discount_percentage*100%>%</small></div>
                <div class="card-text">
                  <i class="material-icons pr-2" style="vertical-align: -6px">store</i><%= productsSale[i].userID %>
                </div>
                <div class="card-text pt-2 grey-text" style="position: relative;">
                  <div class="star-ratings" style="width: 95px;vertical-align: -6px;">
                    <div class="star-ratings-top text-warning font-weight-bold sale" style="font-size: 1.2rem;">
                      ★★★★★
                    </div>
                    <div class="star-ratings-bottom text-light font-weight-bold" style="font-size: 1.2rem">
                      ★★★★★
                    </div>
                  </div>
                  <script>
                      var width = "<%if(productsSale[i].dataValues.rating!=null){%><%=productsSale[i].dataValues.rating/5*100%><%}else{%>0<%}%>%"
                      $($(".star-ratings-top.sale")[`<%=i%>`]).css("width",width)
                  </script>
                  <span class="pl-1" style="display: inline-block;"> (<%=productsSale[i].dataValues.reviewCount%>)</span>
                  <span style="display: inline-block;position: absolute; right:0;top:14px;">Sales: <%=productsSale[i].dataValues.saleCount%></span>
                </div>
              </div>
            </div>
          </a>
        <% } %>
      </div>
      <h3 class="p-2">
        <img src="images/source/new-icon.png" / style="border-radius: 50%;height: 42px;width: 42px;box-shadow: 0 2px 5px #999999;">
        <span class="pl-3" style="vertical-align: -5px;">Newly Add</span>
      </h3>
      <div class="row">
        <% for(var i=0; i < maxNum; i++){ %>
          <style>
            .productCard{
              transition: box-shadow 0.3s, border 0.3s;
              border: thin solid rgba(0, 0, 0, 0);
            }
            .productCard:hover{
              border: thin solid #f80;
              box-shadow: 0 0 10px #f80;
            }
          </style>
          <a class="col-lg-3 pl-2 pr-2 pb-3" href="<%=hostPath%>/product/<%=productsNew[i].id%>">
            <div class="card productCard">
              <div class="p-3">
                <div class="prodImgContainer" 
                  style=
                    "background-image:url('<%=hostPath%>/images/products/<%=productsNew[i].productImage%>');
                    background-size: contain;
                    background-repeat: no-repeat;
                    background-position: center center;
                    width: 100%;
                    padding-top: 75%;">
                </div>
              </div>
              <div class="card-body">
                <h6 class="card-title mb-1 text-dark font-weight-normal" style="height: 2.5rem;overflow: hidden;"><%= productsNew[i].productName %></h6>
                <div class="card-text pb-2">
                  <%= productsNew[i].productType %>
                </div>
                <h4 class="card-title text-warning mb-0">
                  SGD <%= productsNew[i].price %>
                </h4>
                <div class="grey-text mb-2"><small><del class="pr-2">S$<%=Math.round(productsNew[i].price/(1-productsNew[i].discount_percentage),2)%></del> Saving <%=productsNew[i].discount_percentage*100%>%</small></div>
                <div class="card-text">
                  <i class="material-icons pr-2" style="vertical-align: -6px">store</i><%= productsNew[i].userID %>
                </div>
                <div class="card-text pt-2 grey-text" style="position: relative;">
                  <div class="star-ratings" style="width: 95px;vertical-align: -6px;">
                    <div class="star-ratings-top text-warning font-weight-bold new" style="font-size: 1.2rem;">
                      ★★★★★
                    </div>
                    <div class="star-ratings-bottom text-light font-weight-bold" style="font-size: 1.2rem">
                      ★★★★★
                    </div>
                  </div>
                  <script>
                      var width = "<%if(productsNew[i].dataValues.rating!=null){%><%=productsNew[i].dataValues.rating/5*100%><%}else{%>0<%}%>%"
                      $($(".star-ratings-top.new")[`<%=i%>`]).css("width",width)
                  </script>
                  <span class="pl-1" style="display: inline-block;"> (<%=productsNew[i].dataValues.reviewCount%>)</span>
                  <span style="display: inline-block;position: absolute; right:0;top:14px;">Sales: <%=productsNew[i].dataValues.saleCount%></span>
                </div>
              </div>
            </div>
          </a>
        <% } %>
      </div>
    </div>
    <% include ../partials/footer %>
</body>
</html>
